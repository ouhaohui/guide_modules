define("util/util",[],function(){function e(e){var t=$(e).offset(),r=n($(e).css("width"));return{x:t.left+r,y:t.top}}function t(e,t){var n=e.attr("transform").replace(","," "),r=n.substring(n.indexOf("scale(")+6,n.lastIndexOf(")")),i=e.attr("fill"),s=n.substring(n.indexOf("transform(")+11,n.indexOf(")"));s.match(" ")||s.match(" ")==" "?(left=n.substring(n.indexOf("(")+1,n.indexOf(" ")),ttop=n.substring(n.indexOf(" ")+1,n.indexOf(")"))):(left=s,ttop=null);var o;switch(t){case"left":return parseFloat(left);case"top":return parseFloat(ttop);case"scale":return parseFloat(r);case"fill":return i;default:return o={left:parseFloat(left),top:parseFloat(ttop),scale:parseFloat(r),bg:i},o}}function n(e){var t=e;return t=t.substring(0,e.indexOf("px")),parseInt(t)}function r(e){var t=e.match("svg");return t?!0:!1}function i(e){function i(){n++,n==e.length&&r(t)}var t=[],n=0,r=function(){},e=typeof e!="object"?[e]:e;for(var s=0;s<e.length;s++)t[s]=new Image,t[s].src=e[s],t[s].onload=function(){i()},t[s].onerror=function(){i()};return{done:function(e){r=e||r}}}return{lightingOffset:e,getTransform:t,pxToInt:n,isSvg:r,preloadimages:i}}),define("graphs/graphs",["util/util"],function(e){function t(){function t(){if($(".guide-mousewheel").length<1)return;return $(".guide-mousewheel").attr("src","../../templates/default/assets/image/wheel"+e+".png"),e++,e==5&&(e=1),setTimeout(t,30)}var e=1;return setTimeout(t,30)}function n(n,r,i,s){var o=o||"text",u='<div class="guide-arrow-div"></div>',a='<img class="guide-text"src=\'../../templates/default/assets/image/'+r+i+'.png\'width="337" height="137"/>',f='<div class="guide-dbclick"><div class="dbclick-next"></div></div>',l='<img class="guide-arrow"src=\'../../templates/default/assets/image/arrow.png\'width="191" height="109"/>',c='<img class="guide-mousewheel" src="" width="337" height="137"/>';if(n=="mask")a=$(a).attr("src","../../templates/default/assets/image/mask.png"),u=$(u).append(f).append(a),$(u).addClass("dbclick-div"),$(a).css("float","left"),$(a).css("width",437),$("body").append(u),$(".guide-arrow-div").css("opacity","1"),$(".guide-arrow-div").css("right","35%"),$(".guide-arrow-div").css("top","40%");else if(n=="end"){var h=$(a).attr("src","../../templates/default/assets/image/mousewheel.png"),p=$(u).append(c).append(h),d=$(u).append(l);$("body").append(p),t(),$(p).css("right","40%"),$(p).css("top","40%"),$(h).css("float","left"),$(d).css("bottom","110px"),$(d).css("left","170px"),$(d).css("transform","rotate(-55deg)")}else if(n==".exitIcon"){var h=$(a).attr("src","../../templates/default/assets/image/end.png"),p=$(u).append(h),d=$(u).append(l);$("body").append(p),$("body").append(d),$(p).css("right","40%"),$(p).css("top","40%"),$(h).css("float","left"),$(d).css("bottom","110px"),$(d).css("left","170px"),$(d).css("transform","rotate(-55deg)")}else{u=$(u).append(l).append(a),$("body").append(u);var v=e.lightingOffset(n);$(".guide-arrow-div").css("left",v.x+5),$(".guide-arrow-div").css("top",v.y-20)}return{done:function(e){n=="end"&&(postaction=e||function(){})}}}function r(){var t="<div class=\"rhombus red \" onclick=''></div>",n=$(".top-chart>svg").css("height"),r=$(".capi-main>g").eq(6).children();n=e.pxToInt(n),n=52-n,$(".rhombus").remove();var r=r.eq(1);rhombusTraform=e.getTransform(r),left=rhombusTraform.left,scale=rhombusTraform.scale,left=left+3+"px",$("body").before($(t));var i=$(".rhombus").eq(0),s=e.pxToInt(i.css("width"))*scale,o=e.pxToInt(i.css("height"))*scale,u=n-o*0+"px";i.css("width",s),i.css("height",o);var a=e.lightingOffset(r);i.css("top",a.y+3*scale/2),i.css("left",a.x+3*scale/2)}function i(){var t="<div class=\"rect \" onclick=''></div>",n=$(".capi-main>g").eq(3).children(),r=$(".top-chart>svg").css("height"),i,s=0;r=e.pxToInt(r);var o=n.eq(20).find("rect").eq(1),u=o.attr("y"),a=o.attr("width"),f=o.attr("height"),l=e.getTransform(n.eq(20),"left"),c=n.eq(20).attr("fill"),u=parseInt(u)-r-s+"px";$("body").before($(t));var h=$(".rect").eq(0);h.css("width",a),h.css("height",f);var p=e.lightingOffset(o);h.css("top",p.y),h.css("left",p.x),c==="#33AA11"||c==="#33aa11"?h.addClass("green"):h.addClass("red"),h.css("background",c)}function s(){var t="<div class=\"triangle \" onclick=''></div>",n=$(".capi-main>g").eq(5).children().not("circle"),r=$(".top-chart>svg").css("height"),i;r=parseInt(r.substring(0,r.indexOf("px")));var s=n.eq(2),o=e.getTransform(s),u=o.top,a=o.left,f=o.scale,l=o.bg;$("body").before($(t));var c=$(".triangle").eq(0),h=e.pxToInt(c.css("borderLeftWidth")),p=e.pxToInt(c.css("borderRightWidth")),d=e.pxToInt(c.css("borderBottomWidth"));c.css("borderLeftWidth",h*f),c.css("borderRightWidth",p*f),c.css("borderBottomWidth",d*f),i=e.lightingOffset(s),c.css("top",i.y),c.css("left",i.x),l=="#33AA11"||l=="#33aa11"?c.addClass("green"):c.addClass("red"),c.css("border-color","transparent transparent "+l+" transparent")}function o(){var t="<div class=\"circle\" onclick=''></div>",n=$(".capi-main>g").eq(5).children().not("path"),r=$(".top-chart>svg").css("height"),i,s;$("body").before($(t)),r=parseInt(r.substring(0,r.indexOf("px")));var o=n.eq(0),u=e.getTransform(o),a=u.scale,f=$(".circle").eq(0);width=e.pxToInt(f.css("width"))*a,f.css("width",width),f.css("height",width),s=e.lightingOffset(o),f.css("top",s.y-.8*a),f.css("left",s.x-.8*a),f.css("border-color","#DD2200")}function u(){$(".rhombus").remove(),$(".rect").remove(),$(".triangle").remove(),$(".circle").remove()}function a(){r(),i(),s(),o()}return{createArrow:n,createGraph:a,remove:u}}),define("event/event",["util/util"],function(e){function t(e){var t=document.getElementsByTagName("body")[0],n=0,e=e||function(){},r=navigator.userAgent.match(/MSIE (\d)/i);r=r?r[1]:undefined;var i=/FireFox/i.test(navigator.userAgent);r<9?t.attachEvent("onmousewheel",function(){return n<1&&(e(),n++),!1}):i?t.addEventListener("DOMMouseScroll",function(t){n<1&&(e(),n++),t.preventDefault()},!1):t.addEventListener("mousewheel",function(t){n<1&&(e(),n++),t.preventDefault()},!1)}function n(e){function r(e){$(e).dblclick(function(e){e.stopPropagation()})}var t=$("body>div:last"),n='<div class="dialog-mask"></div>';if(e=="mask")return $(".capi-notice,.capi-timeChart,.capi-trade,.capi-evInfo").addClass("light-dialog");if(t.hasClass("capi-notice")||t.hasClass("capi-timeChart")||t.hasClass("capi-trade")||t.hasClass("capi-evInfo"))n=$(n).css("height",t.css("height")),t.append(n),r(n),t.addClass("light-dialog")}function r(e){var t=e||"";t.match("rhombus")&&$(".capi-main>g").eq(6).children().eq(1).trigger("click"),t.match("triangle")&&$(".capi-main>g").eq(5).children().not("circle").eq(2).trigger("click"),t.match("rect")&&$(".capi-main>g").eq(3).children().eq(20).find("rect").eq(2).trigger("click"),t.match("circle")&&$(".capi-main>g").eq(5).children().not("path").eq(0).trigger("click")}return{scrollFun:t,lightDialog:n,graphfn:r}}),define("guide",["graphs/graphs","util/util","event/event"],function(e,t,n){t.preloadimages(["../../templates/default/assets/image/wheel1.png","../../templates/default/assets/image/wheel2.png","../../templates/default/assets/image/wheel3.png","../../templates/default/assets/image/wheel4.png"]),function(){$(".event-box").addClass("guide-object"),$(".signals").addClass("guide-object");var t=$(".capi-transition");for(var n=0;n<t.length;n++)$(".capi-transition").eq(n).addClass("guide-object");$(".top-chart>svg").attr("class","guide-object")}();var r=function(e){return new r.prototype.initGuide(e)};return r.prototype={initGuide:function(t){return this.part=0,this.step=0,this.stepNode=0,this.interval,this.optionJson=t||{guideObject:[[[]]]},$("body>div").hasClass("mask")?$(".mask").append($('<div class="exitIcon" unselectable="on"><img src="../../templates/default/assets/image/exit.png"/></div>')):$("body").append($('<div id="mask" class="mask"><div class="exitIcon" unselectable="on"><img src="../../templates/default/assets/image/exit.png"/></div></div>')),this.initEvent(),e.createGraph(),this.begain()},enter:function(e){var t='<div class="dialog-mask"></div>';t=$(t).css("height",$(e).css("height")),t=$(t).css("cursor","pointer"),$(e).append(t),$(e).addClass("light-div"),createArrow(e,9,9),$(".dialog-mask").click(function(){window.location.href="http://www.yuncaijing.com/help/guide"})},begain:function(){var e=this.part,t=this.step;this.partObject=this.optionJson.guideObject[e],this.guideObject=this.optionJson.guideObject[e][t].step,this.delayTime=this.optionJson.guideObject[e][t].delayTime,this.partLeght=this.optionJson.guideObject.length,this.stepLeght=this.optionJson.guideObject[e].length,this.nodeLeght=this.optionJson.guideObject[e][t].step.length,this.blink()},blink:function(){function n(){var n=$(e.guideObject[e.stepNode]);return e.point("redraw"),$(".light-dialog").removeClass("light-dialog"),e.guideObject[e.stepNode]=="mask"?(e.maskEvent(),e.nextStepNode()):t.isSvg(e.guideObject[e.stepNode])?(n.attr("class","guide-object light-div"),remove(),e.nextStepNode()):e.guideObject[e.stepNode]==".exitIcon"?e.nextStepNode():(n.addClass("light-div"),e.userEvnet(),e.nextStepNode())}var e=this;this.interval=setInterval(n,this.delayTime)},point:function(r){var i=this.guideObject[this.stepNode],s=this;if(t.isSvg(i)||!i)return;if(r=="redraw"){this.point("remove");function o(){s.nextStep()}e.createArrow(i,this.part,this.step,this.stepNode).done(n.scrollFun(o));return}if(r=="remove"){$(".guide-arrow-div").remove();return}if(r=="notice"){e.createArrow("mask");return}r=="replay"&&($(".guide-arrow-div").removeClass("arrow-animate"),setTimeout("$('.guide-arrow-div').addClass('arrow-animate')",50))},userEvnet:function(){var e=this;$(".light-div").one("click",function(){n.graphfn(e.guideObject[0]),e.nextStep()})},maskEvent:function(){var e=this;$("body").one("dblclick",".dbclick-div,.mask",function(t){function i(){$(".top-chart>svg").trigger("dblclick"),e.nextStep()}var r=e.guideObject;r&&r[0]=="mask"&&(n.lightDialog("mask"),setTimeout(i,1500))})},initEvent:function(){var e=this;$(".exitIcon").click(function(t){if(t.currentTarget.className=="exitIcon")return e.quit()}),$(".mask").bind("selectstart",function(){return!1})},nextStep:function(){this.step=this.step+1,$(".light-div").removeClass("light-div"),$(".top-chart>svg").attr("class","guide-object"),this.point("remove"),this.step>=this.stepLeght&&this.end(),setTimeout(function(){n.lightDialog()},50),this.begain()},nextStepNode:function(){this.stepNode++,this.stepNode>=this.nodeLeght&&(this.stepNode=0,clearInterval(this.interval))},end:function(){$(".light-div").removeClass("light-div"),this.step=0,this.part=this.part+1,this.part>=this.partLeght},quit:function(){window.location.href="http://www.yuncaijing.com"}},r.prototype.initGuide.prototype=r.prototype,{guide:r}}),require(["guide"],function(e){var t=e.guide({guideObject:[[{step:[".animate:eq(0)"],delayTime:100},{step:[".capi-transition:eq(0)"],delayTime:1500},{step:["mask"],delayTime:1500}],[{step:[".rhombus"],delayTime:1e3},{step:[".rect"],delayTime:1900},{step:[".triangle"],delayTime:1900},{step:[".circle"],delayTime:1900},{step:["mask"],delayTime:1900}],[{step:["end"],delayTime:800},{step:[".exitIcon"],delayTime:1100}]]})}),define("guideb",function(){});